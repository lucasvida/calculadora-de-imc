<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora IMC</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,700;1,600&display=swap');

        @import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');

        :root {
            --bg-color: #f7f9fa;
        }

        body {
            font-family: 'Raleway', sans-serif;
            background-color: var(--bg-color);
        }

        #alertErro {
            display: none;
            width: 200px;
            text-align: center;
            position: fixed;
            top: 10px;
            right: 10px;
            border-radius: 5px;
            background-color: rgba(110, 1, 19, 0.082);
            color: rgb(180, 0, 45);
            padding: 20px;
            transition: 1s;
        }

        @layer principal {

            .container {
                width: 95%;
                margin: 0 auto;
            }

            .container h1 {
                text-align: center;
            }

            .formulario {
                display: flex;
                justify-content: center;
                margin-top: 35px;
            }

            .formulario form {
                width: 25%;
                box-shadow: 0px 0px 0px rgba(58, 0, 77, 0.1),
                    0px 3px 15px rgba(58, 0, 77, 0.1),
                    0px 5px 30px rgba(58, 0, 77, 0.1),
                    0px 8px 44px rgba(58, 0, 77, 0.1),
                    0px 10px 59px rgba(58, 0, 77, 0.1),
                    0px 13px 74px rgba(58, 0, 77, 0.1);
                padding: 50px;

            }

            .input {
                padding: 5px;
            }

            .input:nth-child(2) {
                margin-top: 15px;
                padding: 5px;
            }

            .buttons {
                margin-top: 15px;
                padding: 5px;
            }

            label {
                margin: 5px;
                font-size: 0.75em;
            }

            input {
                width: 95%;
                height: 35px;
                border-radius: 10px;
                border: solid 2px lightblue;
                margin-top: 5px;
                padding: 10px;
            }

            .calcular {
                width: 100%;
                background-color: orangered;
                font-size: 1.2em;
                font-weight: 400;
                color: aliceblue;
                padding: 15px;
                border-radius: 5px;
                cursor: pointer;
                border: 0;
                text-align: center;
            }

            .reset {
                width: 100%;
                font-size: 0.75em;
                font-weight: bold;
                color: rgb(1, 82, 153);
                background-color: #d8eef9;
                padding: 10px;
                border-radius: 5px;
                cursor: pointer;
                margin-top: 5px;
                border: 0;
                text-align: center;
            }

            input[type=text]::placeholder {
                color: rgba(0, 70, 144, 0.749);
            }

            input[type=text]:focus {
                border: 3px solid rgb(4, 106, 196);
                ;
            }


            .resultado {
                display: flex;
                align-items: center;
                justify-content: center;
                margin-top: 75px;
            }


        }
    </style>
</head>

<body>


    <section class="container">
        <h1>CALCULE O SEU IMC</h1>
        <div class="formulario">

            <form action="">
                <div class="input">
                    <label for="peso">Digite seu Peso:</label><br>
                    <input type="text" inputmode="numeric" id="peso" maxlength="3" name="Peso"
                        placeholder="Exemplo: 110kg"><br>
                </div>
                <div class="input">
                    <label for="peso">Digite sua Altura:</label><br>
                    <input type="text" inputmode="numeric" id="altura" maxlength="3" name="Altura"
                        placeholder="Exemplo: 180cm"><br>
                </div>
                <div class="buttons">
                    <button type="submit" class="calcular">Calcular</button>
                    <button type="reset" class="reset">Limpar Formulário</button>
                </div>
            </form>
        </div>
    </section>
    <section class="container">
        <div class="resultado">
            <!-- Resultado Será Exibido Aqui -->
        </div>
    </section>
    <div id="alertErro" class="animate__animated ">

    </div>


    <script>

        // 01 - Capturar os dados do input
        // 02 - Tratar Campos vazios
        // 03 - Exibir calculo e o nível de IMC

        const form = document.querySelector('form');
        const peso = document.querySelector('#peso');
        const altura = document.querySelector('#altura');
        const resultado = document.querySelector('.resultado');
        const inputs = document.querySelectorAll('input');
        let campoVazio = false;
        let imc;

        //Objeto com dados do nível de obesidade.
        let dadosImc = {
            abaixo: 'Abaixo do Peso',
            normal: 'Peso Normal',
            sobrepeso: 'Sobrepeso',
            obesidadeGrauI: 'Obesidade Grau I',
            obesidadeGrauII: 'Obesidade Grau II',
            obesidadeGrauIII: 'Obseidade Grau III',
        }

        //Função para exibir alertas de erro.
        function alerta(erro) {
            const alertPopUp = document.querySelector('#alertErro');
            alertPopUp.style.display = 'block';
            alertPopUp.classList.add('animate__fadeInDown');
            alertPopUp.innerHTML = erro;
            setTimeout(() => {
                alertPopUp.style.display = 'none';
            }, 2000);
        }


        peso.addEventListener('keyup', () => {
            peso.value = peso.value.replace(/[^0-9]/gi, "");
        })

        altura.addEventListener('keyup', () => {
            altura.value = altura.value.replace(/[^0-9]/gi, "");
        })

        form.addEventListener('submit', (e) => {
            //Evita o envio nativo do formulário
            e.preventDefault();
            //Percorre todos os inputs, emitindo um alerta e colocando o foco no último vazio.
            for (let i of inputs) {
                if (i.value === "") {
                    alerta(`Campo ${i.name} não pode ser vazio`);
                    i.focus();
                    campoVazio = true;
                } else {
                    campoVazio = false;
                }
            }

            const alturaConvert = altura.value.replace(',', '');

            //Verifica de ainda existe campo vazio, caso não executa o cálculo do IMC
            if (campoVazio === false) {
                // Cálculo do IMC = peso / altura x altura. Depois multiplicado por 10.000 para arrendondar e depois fixa em duas casas.
                imc = (peso.value / (alturaConvert * alturaConvert) * 10000).toFixed(2);
            }

            //Verifica qual o nível de obesidade do paciente.
            if (imc <= 18.5) {
                resultado.innerHTML = `Resultado: ${dadosImc.abaixo} , seu IMC é: ${imc.replace('.', ',')}`;
            } else if (imc > 18.5 && imc <= 24.9) {
                resultado.innerHTML = `Resultado: ${dadosImc.normal} , seu IMC é: ${imc.replace('.', ',')}`;
            } else if (imc > 25 && imc <= 29.9) {
                resultado.innerHTML = `Resultado: ${dadosImc.sobrepeso} , seu IMC é: ${imc.replace('.', ',')}`;
            } else if (imc > 30 && imc <= 34.9) {
                resultado.innerHTML = `Resultado: ${dadosImc.obesidadeGrauI} , seu IMC é: ${imc.replace('.', ',')}`;
            } else if (imc > 35 && imc <= 39.9) {
                resultado.innerHTML = `Resultado: ${dadosImc.obesidadeGrauII} , seu IMC é: ${imc.replace('.', ',')}`;
            } else {
                resultado.innerHTML = `Resultado: ${dadosImc.obesidadeGrauIII} , seu IMC é: ${imc.replace('.', ',')}`;
            }
        })







    </script>

</body>

</html>